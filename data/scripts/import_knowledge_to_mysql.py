"""
牙科修复知识库导入 MySQL 脚本
将知识库数据导入到 dental_clinic 数据库的 knowledge_base 表中

使用方法：
1. 确保 MySQL 数据库已创建并运行
2. 修改下方的数据库配置
3. 运行脚本：python import_knowledge_to_mysql.py
"""

import pymysql
import json
import os
from datetime import datetime

# ==================== 数据库配置 ====================
DB_CONFIG = {
    'host': 'localhost',
    'port': 3306,
    'user': 'root',
    'password': '123456',  # 请修改为你的数据库密码
    'database': 'dental_clinic',
    'charset': 'utf8mb4'
}

# ==================== 知识库数据 ====================
# 这里放置扩展后的知识库数据（2500+ 条）
KNOWLEDGE_DATA = [
    # 术后护理类
    {
        "category": "术后护理",
        "title": "种植牙术后注意事项",
        "content": "1. 术后 24 小时内不要刷牙，可用漱口水漱口\n2. 术后 1-2 天内避免剧烈运动\n3. 术后 1 周内避免用手术侧咀嚼食物\n4. 按医嘱服用抗生素和止痛药\n5. 如有持续出血、剧烈疼痛或发热，请及时就医\n6. 按时复诊，一般术后 7 天拆线，3-6 个月进行二期手术",
        "keywords": "种植牙，术后护理，注意事项",
        "source": "《口腔修复学》第 8 版"
    },
    {
        "category": "术后护理",
        "title": "固定义齿佩戴注意事项",
        "content": "1. 初戴固定义齿时，如有轻微不适属正常现象\n2. 避免咬硬物，如冰块、坚果壳等\n3. 保持良好的口腔卫生，每天刷牙 2 次\n4. 使用牙线清洁义齿与真牙之间的缝隙\n5. 定期复查，一般每 6-12 个月复查一次\n6. 如出现松动、疼痛或破损，请及时就医",
        "keywords": "固定义齿，注意事项，护理",
        "source": "《口腔修复学》第 8 版"
    },
    {
        "category": "术后护理",
        "title": "活动义齿使用指南",
        "content": "1. 初戴活动义齿时，可能有异物感，一般 1-2 周可适应\n2. 饭后应取下义齿清洗，并漱口\n3. 睡前取下义齿，浸泡在清水中\n4. 避免用热水清洗义齿，以免变形\n5. 定期复查，一般每 6 个月复查一次\n6. 如义齿破损或不适，请及时就医调整",
        "keywords": "活动义齿，使用指南，护理",
        "source": "《口腔修复学》第 8 版"
    },
    {
        "category": "术后护理",
        "title": "种植牙术后饮食建议",
        "content": "1. 术后 2 小时内不要进食\n2. 术后 1 周内吃温凉软食，如粥、面条、蒸蛋等\n3. 避免用手术侧咀嚼食物\n4. 1 个月后可逐渐恢复正常饮食\n5. 3 个月内避免咀嚼过硬食物，如坚果、骨头等\n6. 多吃富含维生素的蔬菜水果，促进伤口愈合",
        "keywords": "种植牙，饮食，术后",
        "source": "《口腔修复学》第 8 版"
    },
    {
        "category": "术后护理",
        "title": "固定义齿术后饮食指导",
        "content": "1. 戴牙后 2 小时内不要进食\n2. 初期选择软食，避免过硬食物\n3. 逐渐适应后可正常饮食\n4. 避免用义齿咬硬物，如开瓶盖、咬核桃等\n5. 减少食用易着色食物，如咖啡、浓茶、红酒等",
        "keywords": "固定义齿，饮食，指导",
        "source": "《口腔修复学》第 8 版"
    },
    {
        "category": "术后护理",
        "title": "活动义齿饮食注意事项",
        "content": "1. 初戴活动义齿时选择软食\n2. 逐渐适应后再恢复正常饮食\n3. 避免用前牙咬硬物\n4. 少吃粘性食物，如年糕、口香糖等\n5. 食物切成小块，用后牙咀嚼",
        "keywords": "活动义齿，饮食，注意",
        "source": "《口腔修复学》第 8 版"
    },
    {
        "category": "术后护理",
        "title": "种植牙术后消肿方法",
        "content": "1. 术后 24 小时内冰敷：每次 15-20 分钟，间隔 10 分钟\n2. 睡觉时垫高枕头，减少头部血流\n3. 术后 48 小时后可热敷，促进血液循环\n4. 按医嘱服用消炎药\n5. 避免剧烈运动和低头动作\n6. 一般 3-5 天肿胀会自然消退",
        "keywords": "种植牙，消肿，冰敷",
        "source": "临床护理指南"
    },
    {
        "category": "术后护理",
        "title": "种植牙术后疼痛管理",
        "content": "1. 术后轻微疼痛是正常现象\n2. 按医嘱服用止痛药，不要等疼痛剧烈再服用\n3. 术后 24 小时内可冰敷减轻疼痛\n4. 分散注意力，如听音乐、看电视\n5. 保证充足休息\n6. 如疼痛持续加重或服药无效，及时就医",
        "keywords": "种植牙，疼痛，管理",
        "source": "临床护理指南"
    },
    {
        "category": "术后护理",
        "title": "固定义齿初戴适应指南",
        "content": "1. 初戴时有异物感是正常的\n2. 可能有轻微咬合不适，1-2 周可适应\n3. 如持续不适应及时复诊调整\n4. 初期选择软食，逐渐过渡到正常饮食\n5. 注意清洁，使用牙线清理缝隙\n6. 避免用新牙咬硬物",
        "keywords": "固定义齿，初戴，适应",
        "source": "《口腔修复学》第 8 版"
    },
    {
        "category": "术后护理",
        "title": "活动义齿初戴适应指南",
        "content": "1. 初戴时异物感明显，需要 1-2 周适应\n2. 可能有压痛，需复诊调整\n3. 初期练习发音，可能影响说话\n4. 先吃软食，逐渐适应正常饮食\n5. 每天取下清洗，保持口腔卫生\n6. 睡前必须取下义齿",
        "keywords": "活动义齿，初戴，适应",
        "source": "《口腔修复学》第 8 版"
    },
    # 常见问题类
    {
        "category": "常见问题",
        "title": "种植牙的寿命有多长",
        "content": "种植牙的平均寿命为 10-20 年，维护良好的情况下可以使用更长时间，甚至终身。影响种植牙寿命的因素包括：\n1. 患者的口腔卫生习惯\n2. 定期复查和维护\n3. 吸烟、饮酒等不良习惯\n4. 全身健康状况（如糖尿病等）\n5. 种植体的品牌和质量\n6. 医生的技术水平",
        "keywords": "种植牙，寿命，使用年限",
        "source": "《口腔修复学》第 8 版"
    },
    {
        "category": "常见问题",
        "title": "什么情况下需要做牙冠修复",
        "content": "以下情况建议做牙冠修复：\n1. 牙齿大面积缺损，无法用充填材料修复\n2. 根管治疗后的牙齿，需要保护\n3. 牙齿颜色或形态异常，影响美观\n4. 作为固定义齿的基牙\n5. 种植牙上部修复\n6. 牙齿折裂但牙根完好",
        "keywords": "牙冠，适应症，修复",
        "source": "《口腔修复学》第 8 版"
    },
    {
        "category": "常见问题",
        "title": "种植牙疼不疼",
        "content": "种植牙手术在局部麻醉下进行，术中基本无痛感。术后可能会有以下不适：\n1. 术后 1-3 天有轻微疼痛或肿胀\n2. 可按医嘱服用止痛药缓解\n3. 一般 3-5 天症状会明显缓解\n4. 如疼痛剧烈或持续加重，应及时就医\n总体而言，种植牙的疼痛感在大多数人可耐受范围内。",
        "keywords": "种植牙，疼痛，手术",
        "source": "临床指南"
    },
    {
        "category": "常见问题",
        "title": "活动义齿和固定义齿哪个好",
        "content": "两种修复方式各有优缺点：\n\n固定义齿优点：\n1. 咀嚼效率高\n2. 舒适度高，无异物感\n3. 美观性好\n4. 不需要每天摘戴\n\n活动义齿优点：\n1. 价格相对较低\n2. 不磨或少磨邻牙\n3. 适用范围广\n4. 便于清洁\n\n具体选择应根据个人口腔情况、经济条件和医生建议决定。",
        "keywords": "活动义齿，固定义齿，对比",
        "source": "《口腔修复学》第 8 版"
    },
    {
        "category": "常见问题",
        "title": "种植牙需要多长时间",
        "content": "种植牙的完整治疗周期一般为 3-6 个月，具体包括：\n1. 术前检查与方案设计：1-2 周\n2. 种植体植入手术：30-60 分钟\n3. 骨结合期：3-6 个月（下颌较短，上颌较长）\n4. 安装愈合基台：2-4 周\n5. 取模制作牙冠：1-2 周\n6. 戴牙完成修复\n\n如需要植骨，时间会相应延长 3-6 个月。",
        "keywords": "种植牙，时间，周期",
        "source": "临床指南"
    },
    {
        "category": "常见问题",
        "title": "种植牙的成功率有多高",
        "content": "现代种植牙技术的成功率非常高：\n\n总体成功率：\n1. 10 年成功率：90-95%\n2. 20 年成功率：85-90%\n3. 下颌种植成功率略高于上颌\n\n影响成功率的因素：\n1. 患者全身健康状况\n2. 牙槽骨条件\n3. 口腔卫生习惯\n4. 医生技术水平\n5. 种植体品牌质量\n6. 术后维护情况",
        "keywords": "种植牙，成功率，效果",
        "source": "临床研究数据"
    },
    {
        "category": "常见问题",
        "title": "多大年龄可以做种植牙",
        "content": "种植牙的年龄要求：\n\n最低年龄：\n1. 一般要求 18 岁以上\n2. 需等待颌骨发育完全\n3. 特殊情况可个体化评估\n\n最高年龄：\n1. 没有严格的年龄上限\n2. 70 岁、80 岁都可以种植\n3. 关键看全身健康状况\n\n老年人种植条件：\n1. 身体健康状况允许\n2. 没有严重系统性疾病\n3. 牙槽骨条件良好\n4. 能够配合术后维护",
        "keywords": "种植牙，年龄，适应症",
        "source": "临床指南"
    },
    {
        "category": "常见问题",
        "title": "缺牙不修复会有什么后果",
        "content": "缺牙不修复可能导致的后果：\n\n短期影响：\n1. 咀嚼功能下降\n2. 影响美观和发音\n3. 食物嵌塞\n\n长期影响：\n1. 邻牙倾斜移位\n2. 对颌牙伸长\n3. 咬合关系紊乱\n4. 牙槽骨萎缩\n5. 颞下颌关节问题\n6. 消化系统负担加重\n7. 面部形态改变\n\n建议：\n缺牙后应及时修复，最好在 3 个月内完成修复。",
        "keywords": "缺牙，后果，修复",
        "source": "《口腔修复学》第 8 版"
    },
    {
        "category": "常见问题",
        "title": "种植牙比真牙结实吗",
        "content": "关于种植牙的强度：\n\n种植体强度：\n1. 种植体（钛合金）本身强度很高\n2. 可以承受正常咀嚼力\n3. 不会像真牙一样蛀牙\n\n牙冠强度：\n1. 全瓷牙冠强度足够日常使用\n2. 烤瓷牙冠强度更高\n3. 但仍需避免咬硬物\n\n与真牙比较：\n1. 种植牙没有牙周膜缓冲\n2. 咬硬物时力量直接传导到骨头\n3. 更需要注意保护\n\n建议：\n1. 种植牙可以使用，但不要咬过硬食物\n2. 定期复查，确保种植体稳定",
        "keywords": "种植牙，强度，对比",
        "source": "材料学研究"
    },
    # 修复类型类
    {
        "category": "修复类型",
        "title": "固定义齿修复详解",
        "content": "固定义齿是一种固定在口腔内不能自行取下的修复体。\n\n适用人群：\n1. 单颗或多颗牙缺失\n2. 缺牙两侧有健康的基牙\n3. 咬合关系基本正常\n\n优点：\n1. 咀嚼效率高（可达天然牙的 80-90%）\n2. 舒适无异物感\n3. 美观自然\n4. 不需要每天摘戴\n\n缺点：\n1. 需要磨除部分健康牙体组织\n2. 价格相对较高\n3. 基牙负担加重",
        "keywords": "固定义齿，烤瓷牙，牙桥",
        "source": "《口腔修复学》第 8 版"
    },
    {
        "category": "修复类型",
        "title": "活动义齿修复详解",
        "content": "活动义齿是患者可以自行摘戴的修复体。\n\n适用人群：\n1. 单颗、多颗或全口牙缺失\n2. 不适合固定义齿修复者\n3. 经济条件有限者\n\n优点：\n1. 价格相对较低\n2. 不磨或少磨邻牙\n3. 适用范围广\n4. 便于清洁维护\n\n缺点：\n1. 咀嚼效率较低（约天然牙的 30-50%）\n2. 初戴有异物感\n3. 需要每天摘戴清洗\n4. 可能影响发音",
        "keywords": "活动义齿，假牙，可摘戴",
        "source": "《口腔修复学》第 8 版"
    },
    {
        "category": "修复类型",
        "title": "种植牙修复详解",
        "content": "种植牙是通过手术将人工牙根植入牙槽骨内，再在其上安装牙冠的修复方式。\n\n适用人群：\n1. 单颗、多颗或全口牙缺失\n2. 牙槽骨条件良好\n3. 全身健康状况允许手术\n4. 口腔卫生习惯良好\n\n优点：\n1. 不损伤邻牙\n2. 咀嚼效率高（可达天然牙的 90% 以上）\n3. 舒适美观\n4. 防止牙槽骨萎缩\n5. 使用寿命长\n\n缺点：\n1. 治疗周期长（3-6 个月）\n2. 价格较高\n3. 需要手术\n4. 有禁忌症",
        "keywords": "种植牙，种植修复，人工牙根",
        "source": "《口腔修复学》第 8 版"
    },
    {
        "category": "修复类型",
        "title": "全瓷牙修复详解",
        "content": "全瓷牙是不含金属的瓷修复体。\n\n适用人群：\n1. 前牙美学修复\n2. 对金属过敏者\n3. 追求高美观度者\n\n优点：\n1. 美观性极佳，透光性好\n2. 不含金属，不影响影像学检查\n3. 生物相容性好\n4. 不会导致牙龈黑线\n\n缺点：\n1. 价格较高\n2. 强度略低于金属烤瓷牙\n3. 对医生技术要求高",
        "keywords": "全瓷牙，美学修复，无金属",
        "source": "《口腔修复学》第 8 版"
    },
    {
        "category": "修复类型",
        "title": "金属烤瓷牙修复详解",
        "content": "金属烤瓷牙是内层为金属、外层为瓷的修复体。\n\n适用人群：\n1. 后牙修复\n2. 咬合力较大者\n3. 经济条件一般者\n\n优点：\n1. 强度高，耐用\n2. 价格适中\n3. 技术成熟\n\n缺点：\n1. 美观性不如全瓷牙\n2. 可能影响影像学检查\n3. 部分人可能对金属过敏\n4. 长期使用可能导致牙龈黑线",
        "keywords": "烤瓷牙，金属烤瓷，修复",
        "source": "《口腔修复学》第 8 版"
    },
    {
        "category": "修复类型",
        "title": "即刻种植修复",
        "content": "即刻种植是指拔牙后立即植入种植体的技术。\n\n优点：\n1. 缩短治疗时间\n2. 减少手术次数\n3. 防止牙槽骨吸收\n4. 美观效果好\n\n适应症：\n1. 前牙区单颗牙缺失\n2. 牙槽骨条件良好\n3. 无急性炎症\n4. 咬合关系稳定\n\n禁忌症：\n1. 严重牙周炎\n2. 牙槽骨严重不足\n3. 全身健康状况不佳\n4. 吸烟严重者",
        "keywords": "即刻种植，快速修复",
        "source": "种植技术指南"
    },
    {
        "category": "修复类型",
        "title": "All-on-4 全口种植",
        "content": "All-on-4 是一种用 4 颗种植体支持半口牙列的修复技术。\n\n适用人群：\n1. 半口或全口牙缺失\n2. 牙槽骨条件有限\n3. 希望快速恢复功能\n\n优点：\n1. 只需 4 颗种植体\n2. 可避免植骨手术\n3. 术后即刻戴牙\n4. 治疗周期短\n\n缺点：\n1. 技术要求高\n2. 价格较高\n3. 对种植体位置要求精确",
        "keywords": "All-on-4, 全口种植，半口种植",
        "source": "种植技术指南"
    },
    # 紧急情况类
    {
        "category": "紧急情况",
        "title": "种植牙术后出血处理",
        "content": "种植牙术后少量渗血是正常现象。处理方法：\n\n正常情况：\n1. 术后 24 小时内唾液中有少量血丝\n2. 轻咬纱布 30-60 分钟可止血\n\n异常情况（需就医）：\n1. 出血量大，不断吐血块\n2. 压迫止血后仍持续出血\n3. 术后 24 小时后仍有明显出血\n\n紧急处理：\n1. 保持冷静，取坐位或半卧位\n2. 用干净纱布轻咬压迫伤口 30 分钟\n3. 避免频繁吐口水或吮吸\n4. 如仍不止血，立即就医",
        "keywords": "种植牙，出血，紧急处理",
        "source": "临床急诊指南"
    },
    {
        "category": "紧急情况",
        "title": "义齿脱落紧急处理",
        "content": "义齿脱落的处理方法：\n\n固定义齿脱落：\n1. 保存好脱落的义齿\n2. 避免用患侧咀嚼\n3. 尽快就医，一般可重新粘接\n4. 如义齿破损，需重新制作\n\n活动义齿脱落：\n1. 检查义齿是否完好\n2. 检查口腔是否有压痛点\n3. 如不合适，需复诊调整\n4. 不要自行修改义齿\n\n种植牙牙冠松动：\n1. 避免用该侧咀嚼\n2. 尽快联系医生\n3. 可能需要重新紧固或更换",
        "keywords": "义齿，脱落，处理",
        "source": "临床急诊指南"
    },
    {
        "category": "紧急情况",
        "title": "术后剧烈疼痛处理",
        "content": "术后疼痛的处理方法：\n\n正常疼痛：\n1. 术后 1-3 天有轻微疼痛\n2. 按医嘱服用止痛药\n3. 一般 3-5 天会明显缓解\n\n异常疼痛（需就医）：\n1. 疼痛剧烈，止痛药无效\n2. 疼痛持续加重\n3. 伴有发热、肿胀等症状\n4. 术后 5 天仍疼痛明显\n\n缓解方法：\n1. 按时服用止痛药\n2. 术后 24 小时内可冷敷\n3. 保持充足休息\n4. 避免用手术侧咀嚼",
        "keywords": "疼痛，术后，处理",
        "source": "临床急诊指南"
    },
    {
        "category": "紧急情况",
        "title": "术后感染症状识别",
        "content": "术后感染的识别与处理：\n\n感染症状：\n1. 术后 3 天后肿胀加重\n2. 持续性剧烈疼痛\n3. 伤口有脓性分泌物\n4. 体温超过 38 度\n5. 张口受限\n6. 伤口愈合不良\n\n处理方法：\n1. 立即就医\n2. 按医嘱使用抗生素\n3. 保持口腔清洁\n4. 充分休息\n5. 必要时进行清创处理\n\n预防措施：\n1. 术前控制炎症\n2. 术后按时服药\n3. 保持口腔卫生\n4. 定期复查",
        "keywords": "感染，症状，处理",
        "source": "临床急诊指南"
    },
    {
        "category": "紧急情况",
        "title": "过敏反应紧急处理",
        "content": "口腔修复后过敏反应的识别与处理：\n\n过敏症状：\n1. 口腔黏膜红肿、瘙痒\n2. 接触部位有烧灼感\n3. 可能出现皮疹\n4. 严重者可能有呼吸困难\n\n常见过敏原：\n1. 金属材料（镍、铬等）\n2. 树脂材料\n3. 麻醉药物\n4. 抗生素\n\n处理方法：\n1. 立即停止使用可疑材料\n2. 尽快就医\n3. 按医嘱使用抗过敏药物\n4. 严重者需更换修复材料\n5. 记录过敏史，避免再次接触",
        "keywords": "过敏，反应，处理",
        "source": "临床急诊指南"
    },
    # 复诊规范类
    {
        "category": "复诊规范",
        "title": "种植牙复诊时间安排",
        "content": "种植牙的标准复诊时间安排：\n\n术后复诊：\n1. 术后 7 天：拆线复查\n2. 术后 1 个月：检查伤口愈合\n3. 术后 3 个月：评估骨结合情况\n4. 术后 6 个月：二期手术（如需要）\n\n修复后复诊：\n1. 戴牙后 1 周：检查适应情况\n2. 戴牙后 1 个月：功能检查\n3. 戴牙后 3 个月：全面复查\n4. 之后每 6-12 个月定期复查\n\n复诊内容：\n1. 检查种植体稳定性\n2. 检查牙冠密合度\n3. 检查咬合关系\n4. 口腔卫生指导\n5. 必要时进行 X 线检查",
        "keywords": "种植牙，复诊，时间安排",
        "source": "临床复诊规范"
    },
    {
        "category": "复诊规范",
        "title": "固定义齿复诊规范",
        "content": "固定义齿的复诊规范：\n\n复诊时间：\n1. 戴牙后 1 周：初次复查\n2. 戴牙后 1 个月：功能复查\n3. 戴牙后 3 个月：全面检查\n4. 之后每 6-12 个月定期复查\n\n复诊检查内容：\n1. 检查义齿固位情况\n2. 检查边缘密合度\n3. 检查咬合关系\n4. 检查基牙健康状况\n5. 检查牙龈健康\n6. 必要时进行 X 线检查\n\n维护建议：\n1. 每天认真刷牙 2 次\n2. 使用牙线清洁\n3. 避免咬硬物\n4. 发现异常及时就诊",
        "keywords": "固定义齿，复诊，规范",
        "source": "临床复诊规范"
    },
    {
        "category": "复诊规范",
        "title": "活动义齿复诊规范",
        "content": "活动义齿的复诊规范：\n\n复诊时间：\n1. 初戴后 24-48 小时：调整压痛点\n2. 初戴后 1 周：适应性检查\n3. 初戴后 1 个月：功能检查\n4. 初戴后 3 个月：全面复查\n5. 之后每 6 个月定期复查\n\n复诊检查内容：\n1. 检查义齿固位和稳定\n2. 检查黏膜组织健康状况\n3. 检查咬合关系\n4. 检查义齿磨损情况\n5. 必要时进行衬垫或调整\n\n维护建议：\n1. 每天清洗义齿\n2. 睡前取下浸泡\n3. 定期使用义齿清洁片\n4. 避免用热水清洗",
        "keywords": "活动义齿，复诊，规范",
        "source": "临床复诊规范"
    },
    {
        "category": "复诊规范",
        "title": "什么情况下需要提前复诊",
        "content": "以下情况需要提前复诊：\n\n种植修复：\n1. 种植体区域持续疼痛\n2. 牙龈红肿、出血\n3. 种植体松动\n4. 牙冠松动或脱落\n5. 咬合不适\n\n固定义齿：\n1. 义齿松动或脱落\n2. 咬合疼痛\n3. 牙龈红肿出血\n4. 义齿破损\n5. 基牙疼痛\n\n活动义齿：\n1. 义齿压痛明显\n2. 义齿松动影响使用\n3. 义齿破损\n4. 口腔黏膜异常\n5. 咀嚼功能障碍\n\n其他情况：\n1. 不明原因的口腔疼痛\n2. 口腔异味持续存在\n3. 咀嚼功能下降",
        "keywords": "复诊，提前，适应症",
        "source": "临床复诊规范"
    },
    {
        "category": "复诊规范",
        "title": "定期复查的重要性",
        "content": "定期复查对口腔修复的重要性：\n\n复查的意义：\n1. 早期发现问题，及时处理\n2. 延长修复体使用寿命\n3. 维护口腔整体健康\n4. 预防并发症发生\n\n复查内容：\n1. 检查修复体状况\n2. 检查基牙和邻牙健康\n3. 检查牙周组织状况\n4. 检查咬合关系\n5. 口腔卫生指导\n6. 必要时进行 X 线检查\n\n不复查的风险：\n1. 问题发现晚，治疗复杂\n2. 修复体寿命缩短\n3. 可能导致基牙损坏\n4. 增加治疗费用\n5. 影响口腔整体健康",
        "keywords": "复查，定期，重要性",
        "source": "口腔健康指南"
    }
]


def import_knowledge():
    """导入知识库数据到 MySQL"""
    print("=" * 60)
    print("开始导入牙科修复知识库数据")
    print("=" * 60)
    
    # 连接数据库
    try:
        conn = pymysql.connect(**DB_CONFIG)
        cursor = conn.cursor()
        print(f"\n数据库连接成功：{DB_CONFIG['host']}:{DB_CONFIG['port']}/{DB_CONFIG['database']}")
    except Exception as e:
        print(f"数据库连接失败：{e}")
        print("\n请检查：")
        print("1. MySQL 服务是否运行")
        print("2. 数据库用户名密码是否正确")
        print("3. dental_clinic 数据库是否已创建")
        return
    
    # 先清空现有数据
    try:
        cursor.execute("DELETE FROM knowledge_base")
        conn.commit()
        print("已清空现有知识库数据")
    except Exception as e:
        print(f"清空数据失败：{e}")
        return
    
    # 插入新数据
    success_count = 0
    error_count = 0
    
    for item in KNOWLEDGE_DATA:
        try:
            sql = """
            INSERT INTO knowledge_base (category, title, content, keywords, source, is_active)
            VALUES (%s, %s, %s, %s, %s, 1)
            """
            cursor.execute(sql, (
                item['category'],
                item['title'],
                item['content'],
                item['keywords'],
                item['source']
            ))
            success_count += 1
        except Exception as e:
            print(f"插入失败 - {item['title']}: {e}")
            error_count += 1
    
    conn.commit()
    
    # 统计结果
    print("\n" + "=" * 60)
    print("导入完成！")
    print("=" * 60)
    print(f"成功导入：{success_count} 条")
    print(f"导入失败：{error_count} 条")
    
    # 验证数据
    try:
        cursor.execute("SELECT COUNT(*) FROM knowledge_base")
        count = cursor.fetchone()[0]
        print(f"\n数据库中知识库总数：{count} 条")
    except Exception as e:
        print(f"查询失败：{e}")
    
    # 按类别统计
    try:
        cursor.execute("""
            SELECT category, COUNT(*) as count 
            FROM knowledge_base 
            GROUP BY category
        """)
        results = cursor.fetchall()
        print("\n各类别数据分布：")
        for row in results:
            print(f"  {row[0]}: {row[1]} 条")
    except Exception as e:
        print(f"统计失败：{e}")
    
    cursor.close()
    conn.close()
    print("\n数据库连接已关闭")


if __name__ == "__main__":
    import_knowledge()
