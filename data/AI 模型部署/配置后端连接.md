# AutoDL æœåŠ¡é…ç½®å¿«é€Ÿæ›´æ–°

## ğŸ“ ä½ çš„ AutoDL æœåŠ¡åœ°å€æ ¼å¼

æ ¹æ®ä½ çš„å®ä¾‹ï¼ŒæœåŠ¡åœ°å€æ ¼å¼ä¸ºï¼š

```
https://uu769760-b58d-861e482d.bjb1.seetacloud.com:8443
```

---

## ğŸ”§ æ›´æ–°åç«¯é…ç½®

### æ–¹å¼ä¸€ï¼šç›´æ¥ç¼–è¾‘ `.env` æ–‡ä»¶

åœ¨æœ¬åœ°åç«¯é¡¹ç›®ä¸­ï¼Œç¼–è¾‘ `backend/.env`ï¼š

```env
# AI æœåŠ¡é…ç½®
AI_SERVICE_URL=https://uu769760-b58d-861e482d.bjb1.seetacloud.com:8443/generate
AI_SERVICE_TYPE=autodl
AI_MAX_TOKENS=150
AI_TEMPERATURE=0.7
AI_TIMEOUT_SECONDS=60
```

**å…³é”®**ï¼šç¡®ä¿ `AI_SERVICE_URL` æœ«å°¾æœ‰ `/generate`

---

### æ–¹å¼äºŒï¼šä½¿ç”¨ PowerShell å¿«é€Ÿæ›´æ–°

åœ¨æœ¬åœ°ç”µè„‘ï¼Œåç«¯é¡¹ç›®ç›®å½•ä¸‹æ‰§è¡Œï¼š

```powershell
cd D:\Project\æ¯•ä¸šè®¾è®¡\backend

# å¤‡ä»½åŸé…ç½®
Copy-Item .env .env.bak

# æ›´æ–° AI_SERVICE_URL
(Get-Content .env) -replace '^AI_SERVICE_URL=.*', 'AI_SERVICE_URL=https://uu769760-b58d-861e482d.bjb1.seetacloud.com:8443/generate' | Set-Content .env

# éªŒè¯æ›´æ–°
Select-String "AI_SERVICE_URL" .env
```

---

### æ–¹å¼ä¸‰ï¼šä½¿ç”¨æ‰¹å¤„ç†æ›´æ–°

åˆ›å»º `update_config.bat`ï¼š

```batch
@echo off
chcp 65001 >nul
cd /d "%~dp0backend"

echo æ›´æ–° AI æœåŠ¡é…ç½®...
powershell -Command "(Get-Content '.env') -replace '^AI_SERVICE_URL=.*', 'AI_SERVICE_URL=https://uu769760-b58d-861e482d.bjb1.seetacloud.com:8443/generate' | Set-Content '.env'"

echo é…ç½®å·²æ›´æ–°
Select-String "AI_SERVICE_URL" .env
pause
```

---

## ğŸ§ª æµ‹è¯•è¿æ¥

### æµ‹è¯• AutoDL æœåŠ¡

```bash
curl https://uu769760-b58d-861e482d.bjb1.seetacloud.com:8443/generate \
    -H "Content-Type: application/json" \
    -d '{"prompt": "ç§æ¤ç‰™æœ¯åå¤šä¹…èƒ½åƒé¥­ï¼Ÿ", "max_tokens": 100}'
```

### æµ‹è¯•åç«¯è°ƒç”¨

```bash
# å…ˆç™»å½•è·å– token
curl http://localhost:8000/api/auth/login \
    -H "Content-Type: application/json" \
    -d '{"username": "admin", "password": "admin123"}'

# ä½¿ç”¨ token æµ‹è¯•å¯¹è¯
curl http://localhost:8000/api/dialogues/ \
    -H "Content-Type: application/json" \
    -H "Authorization: Bearer YOUR_TOKEN" \
    -d '{
        "patient_id": 1,
        "session_id": "test_001",
        "user_message": "ç§æ¤ç‰™æœ¯åå¤šä¹…èƒ½åƒé¥­ï¼Ÿ",
        "message_type": "consultation"
    }'
```

---

## ğŸ“‹ å®Œæ•´é…ç½®ç¤ºä¾‹

```env
# åº”ç”¨é…ç½®
APP_NAME=ç‰™ç§‘ä¿®å¤å¤è¯Šæé†’ç³»ç»Ÿ API
APP_VERSION=1.0.0
DEBUG=True

# æ•°æ®åº“é…ç½®
DATABASE_HOST=localhost
DATABASE_PORT=3306
DATABASE_NAME=dental_clinic
DATABASE_USER=root
DATABASE_PASSWORD=ä½ çš„å¯†ç 

# JWT é…ç½®
SECRET_KEY=ä½ çš„å¯†é’¥
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=1440

# AI æœåŠ¡é…ç½® â­ é‡ç‚¹
AI_SERVICE_URL=https://uu769760-b58d-861e482d.bjb1.seetacloud.com:8443/generate
AI_SERVICE_TYPE=autodl
AI_MAX_TOKENS=150
AI_TEMPERATURE=0.7
AI_TIMEOUT_SECONDS=60

# Redis é…ç½®
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
```

---

## ğŸ”„ å¦‚æœæ›´æ¢äº† AutoDL å®ä¾‹

1. åœ¨ AutoDL ä¸Šè¿è¡Œå¯åŠ¨è„šæœ¬ï¼š`bash start.sh`
2. è¾“å…¥ `y` è¡¨ç¤ºæ›´æ¢å®ä¾‹
3. è¾“å…¥æ–°çš„å…¬ç½‘åœ°å€ï¼š`https://æ–°å®ä¾‹åœ°å€.seetacloud.com:ç«¯å£`
4. è„šæœ¬ä¼šè‡ªåŠ¨ä¿å­˜é…ç½®
5. åœ¨æœ¬åœ°æ›´æ–° `backend/.env` ä¸­çš„ `AI_SERVICE_URL`

---

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **URL æ ¼å¼**ï¼šå¿…é¡»æ˜¯ `https://` å¼€å¤´
2. **ç«¯å£å·**ï¼šé€šå¸¸æ˜¯ `8443`ï¼ˆä¸æ˜¯ 6008ï¼‰
3. **è·¯å¾„**ï¼šæœ«å°¾å¿…é¡»æœ‰ `/generate`
4. **ä¸è¦æœ‰ç©ºæ ¼**ï¼šURL ä¸­ä¸èƒ½æœ‰ç©ºæ ¼

---

## ğŸ†˜ æ•…éšœæ’æŸ¥

### é—®é¢˜ 1ï¼šè¿æ¥è¶…æ—¶

**æ£€æŸ¥**ï¼š
- AutoDL æœåŠ¡æ˜¯å¦è¿è¡Œï¼šåœ¨ AutoDL æ§åˆ¶å°æŸ¥çœ‹å®ä¾‹çŠ¶æ€
- è‡ªå®šä¹‰æœåŠ¡æ˜¯å¦æ·»åŠ ï¼šç«¯å£ 8443 æ˜¯å¦æ˜ å°„
- URL æ˜¯å¦æ­£ç¡®ï¼šå¤åˆ¶å®Œæ•´çš„å…¬ç½‘åœ°å€

### é—®é¢˜ 2ï¼šSSL è¯ä¹¦é”™è¯¯

**è§£å†³**ï¼šåœ¨ `ai_service.py` ä¸­æ·»åŠ  `verify=False`

```python
with httpx.Client(timeout=self.timeout, verify=False) as client:
    response = client.post(...)
```

### é—®é¢˜ 3ï¼š404 é”™è¯¯

**æ£€æŸ¥**ï¼šURL æ˜¯å¦å®Œæ•´ï¼Œåº”è¯¥æ˜¯ `.../generate` ç»“å°¾

---

**æ›´æ–°æ—¶é—´**ï¼š2026 å¹´ 2 æœˆ 27 æ—¥
